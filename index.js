(function(){"use strict";var w="";function a(e,t,s,r,l,_,f,U){var n=typeof e=="function"?e.options:e;t&&(n.render=t,n.staticRenderFns=s,n._compiled=!0),r&&(n.functional=!0),_&&(n._scopeId="data-v-"+_);var i;if(f?(i=function(o){o=o||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!o&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(o=__VUE_SSR_CONTEXT__),l&&l.call(this,o),o&&o._registeredComponents&&o._registeredComponents.add(f)},n._ssrRegister=i):l&&(i=U?function(){l.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:l),i)if(n.functional){n._injectStyles=i;var S=n.render;n.render=function(T,c){return i.call(c),S(T,c)}}else{var p=n.beforeCreate;n.beforeCreate=p?[].concat(p,i):[i]}return{exports:e,options:n}}const h={extends:"k-files-field",computed:{buttons(){const e=this.$options.extends.options.computed.buttons.call(this);return e.push({icon:"url",text:this.$t("url"),responsive:!0,click:()=>this.$panel.dialog.open({component:"k-filesfromurl-dialog",props:{endpoint:this.endpoints.field},on:{uploaded:t=>this.uploaded(t)}})}),e}},methods:{uploaded(e){this.multiple===!1&&(this.selected=[]),this.selected.push(e),this.onInput(),this.$events.emit("file.upload"),this.$events.emit("model.update")}}};let m,v;const u={};var g=a(h,m,v,!1,$,null,null,null);function $(e){for(let t in u)this[t]=u[t]}var b=function(){return g.exports}(),k=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("k-dialog",e._b({staticClass:"k-filesfromurl-dialog",attrs:{"submit-button":e.$t("upload"),disabled:e.loading,theme:"positive",size:"medium",icon:"upload"},on:{submit:e.submit,cancel:function(r){return e.close()}}},"k-dialog",e.$props,!1),[s("k-url-field",{attrs:{theme:"field",name:"url",label:e.$t("url")},model:{value:e.url,callback:function(r){e.url=r},expression:"url"}}),e.error?s("k-box",{attrs:{theme:"negative",icon:"alert",text:e.error}}):e._e(),e.loading?s("k-box",{attrs:{theme:"info",icon:"loader",text:e.$t("upload")}}):e._e()],1)},F=[],z="";const C={extends:"k-dialog",props:{endpoint:String},data(){return{url:"",error:!1,loading:!1}},methods:{submit(){const e=this.endpoint+"/uploadfromurl";this.loading=!0,this.error=!1,this.$api.get(e,{url:this.url}).then(t=>{this.loading=!1,this.$emit("uploaded",t),this.close()}).catch(t=>{this.loading=!1,this.error=t.message})}}},d={};var R=a(C,k,F,!1,x,null,null,null);function x(e){for(let t in d)this[t]=d[t]}var y=function(){return R.exports}();window.panel.plugin("plain/filesfromurl",{fields:{files:b},components:{"k-filesfromurl-dialog":y}})})();
